#implemnet a simple reflex agent in python to navigate a grid environment avoiding obstacles and performing basic tasks 
# Environment and Agent Setup
grid = [
    ['.', '.', '.', 'T'],
    ['.', 'O', '.', '.'],
    ['.', '.', 'O', '.'],
    ['A', '.', '.', '.']
]

agent_row, agent_col = 3, 0
agent_direction = 0  # 0:N, 1:E, 2:S, 3:W

# Helper functions
def display_grid():
    """Prints the current grid."""
    for row in grid:
        print(" ".join(row))
    print("-" * 10)

def get_percept_ahead():
    """Returns what the agent perceives directly in front."""
    dr, dc = [(-1, 0), (0, 1), (1, 0), (0, -1)][agent_direction]
    nr, nc = agent_row + dr, agent_col + dc

    if 0 <= nr < len(grid) and 0 <= nc < len(grid[0]):
        return grid[nr][nc]
    return "WALL"

# Agent logic
def simple_reflex_agent_reduced():
    """Agent perceives and acts based on rules."""
    global agent_row, agent_col, agent_direction

    percept = get_percept_ahead()
    print(f"Agent perceives: {percept}")

    if percept in ['O', 'WALL']:
        print("Action: Turn Right")
        agent_direction = (agent_direction + 1) % 4
    elif percept == 'T':
        print("Action: Pick up Task")
        dr, dc = [(-1, 0), (0, 1), (1, 0), (0, -1)][agent_direction]
        grid[agent_row + dr][agent_col + dc] = '.'
    else:  # Move Forward
        print("Action: Move Forward")
        grid[agent_row][agent_col] = '.'  # Clear current spot

        dr, dc = [(-1, 0), (0, 1), (1, 0), (0, -1)][agent_direction]
        agent_row, agent_col = agent_row + dr, agent_col + dc
        grid[agent_row][agent_col] = 'A'  # Place agent at new spot

# Simulation
print("Initial Grid:")
display_grid()

for step in range(10):
    print(f"Step {step + 1}:")
    simple_reflex_agent_reduced()
    display_grid()
